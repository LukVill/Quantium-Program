% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
  \setmainfont[]{Roboto}
  \setmonofont[]{Consolas}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\usepackage{fvextra} \DefineVerbatimEnvironment{Highlighting}{Verbatim}{breaklines,commandchars=\\\{\}}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Quantium Virtual Internship - Retail Strategy and Analytics - Task 1},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{Quantium Virtual Internship - Retail Strategy and Analytics -
Task 1}
\author{}
\date{\vspace{-2.5em}}

\begin{document}
\maketitle

\hypertarget{solution-template-for-task-1}{%
\section{Solution template for Task
1}\label{solution-template-for-task-1}}

This file is a solution template for the Task 1 of the Quantium Virtual
Internship. It will walk you through the analysis, providing the
scaffolding for your solution with gaps left for you to fill in
yourself.

Look for comments that say ``over to you'' for places where you need to
add your own code! Often, there will be hints about what to do or what
function to use in the text leading up to a code block - if you need a
bit of extra help on how to use a function, the internet has many
excellent resources on R coding, which you can find using your favourite
search engine.

\hypertarget{load-required-libraries-and-datasets}{%
\subsection{Load required libraries and
datasets}\label{load-required-libraries-and-datasets}}

Note that you will need to install these libraries if you have never
used these before.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\# Example code to install packages}
\CommentTok{\#install.packages("data.table")}
\DocumentationTok{\#\#\#\# Load required libraries}
\FunctionTok{library}\NormalTok{(}\StringTok{"data.table"}\NormalTok{)}
\FunctionTok{library}\NormalTok{(ggplot2)}
\FunctionTok{library}\NormalTok{(ggmosaic)}
\FunctionTok{library}\NormalTok{(readr)}
\DocumentationTok{\#\#\#\# Point the filePath to where you have downloaded the datasets to and }
\DocumentationTok{\#\#\#\# assign the data files to data.tables}
\CommentTok{\# over to you! fill in the path to your working directory. If you are on a Windows machine, you will need to use forward slashes (/) instead of backshashes (\textbackslash{})}
<<<<<<< HEAD
\NormalTok{filePath }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}\FunctionTok{getwd}\NormalTok{(),}\StringTok{"/"}\NormalTok{)}
\NormalTok{transactionData }\OtherTok{\textless{}{-}} \FunctionTok{fread}\NormalTok{(}\AttributeTok{file =} \FunctionTok{paste0}\NormalTok{(filePath,}\StringTok{"QVI\_transaction\_data.xlsx {-} in.csv"}\NormalTok{), }\AttributeTok{header =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{customerData }\OtherTok{\textless{}{-}} \FunctionTok{fread}\NormalTok{(}\AttributeTok{file =} \FunctionTok{paste0}\NormalTok{(filePath,}\StringTok{"QVI\_purchase\_behaviour.csv"}\NormalTok{), }\AttributeTok{header =} \ConstantTok{TRUE}\NormalTok{)}
=======
\NormalTok{filePath }\OtherTok{\textless{}{-}} \StringTok{""}
\NormalTok{transactionData }\OtherTok{\textless{}{-}} \FunctionTok{fread}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(filePath,}\StringTok{"C:/Users/Luke Villanueva/source/repos/LukVill/Quantium Program/QVI\_transaction\_data.csv"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Taking input= as a system command ('C:/Users/Luke Villanueva/source/repos/LukVill/Quantium Program/QVI_transaction_data.csv') and a variable has been used in the expression passed to `input=`. Please use fread(cmd=...). There is a security concern if you are creating an app, and the app could have a malicious user, and the app is not running in a secure environment; e.g. the app is running as root. Please read item 5 in the NEWS file for v1.11.6 for more information and for the option to suppress this message.
\end{verbatim}

\begin{verbatim}
## Warning in (if (.Platform$OS.type == "unix")
## system else shell)(paste0("(", : '(C:/Users/Luke
## Villanueva/source/repos/LukVill/Quantium Program/QVI_transaction_data.csv) >
## C:\Users\lavil\AppData\Local\Temp\Rtmpohrp18\fileb9dc26cd6811' execution failed
## with error code 1
\end{verbatim}

\begin{verbatim}
## Warning in fread(paste0(filePath, "C:/Users/Luke
## Villanueva/source/repos/LukVill/Quantium Program/QVI_transaction_data.csv")):
## File 'C:\Users\lavil\AppData\Local\Temp\Rtmpohrp18\fileb9dc26cd6811' has size 0.
## Returning a NULL data.table.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{customerData }\OtherTok{\textless{}{-}} \FunctionTok{fread}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(filePath,}\StringTok{"C:/Users/Luke Villanueva/source/repos/LukVill/Quantium Program/QVI\_purchase\_behaviour.csv"}\NormalTok{))}
>>>>>>> b2c19b7dd63d645a501fdb83703c908375eb8b22
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Taking input= as a system command ('C:/Users/Luke Villanueva/source/repos/LukVill/Quantium Program/QVI_purchase_behaviour.csv') and a variable has been used in the expression passed to `input=`. Please use fread(cmd=...). There is a security concern if you are creating an app, and the app could have a malicious user, and the app is not running in a secure environment; e.g. the app is running as root. Please read item 5 in the NEWS file for v1.11.6 for more information and for the option to suppress this message.
\end{verbatim}

\begin{verbatim}
## Warning in (if (.Platform$OS.type == "unix")
## system else shell)(paste0("(", : '(C:/Users/Luke
## Villanueva/source/repos/LukVill/Quantium Program/QVI_purchase_behaviour.csv) >
## C:\Users\lavil\AppData\Local\Temp\Rtmpohrp18\fileb9dc4a7b567c' execution failed
## with error code 1
\end{verbatim}

\begin{verbatim}
## Warning in fread(paste0(filePath, "C:/Users/Luke
## Villanueva/source/repos/LukVill/Quantium Program/QVI_purchase_behaviour.csv")):
## File 'C:\Users\lavil\AppData\Local\Temp\Rtmpohrp18\fileb9dc4a7b567c' has size 0.
## Returning a NULL data.table.
\end{verbatim}

\hypertarget{exploratory-data-analysis}{%
\subsection{Exploratory data analysis}\label{exploratory-data-analysis}}

The first step in any analysis is to first understand the data. Let's
take a look at each of the datasets provided. \#\#\# Examining
transaction data We can use \texttt{str()} to look at the format of each
column and see a sample of the data. As we have read in the dataset as a
\texttt{data.table} object, we can also run \texttt{transactionData} in
the console to see a sample of the data or use
\texttt{head(transactionData)} to look at the first 10 rows. Let's check
if columns we would expect to be numeric are in numeric form and date
columns are in date format.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\# Examine transaction data}
\CommentTok{\# Over to you! Examine the data using one or more of the methods described above.}

\FunctionTok{str}\NormalTok{(transactionData)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Classes 'data.table' and 'data.frame': 264836 obs. of 8 variables:
## $ DATE : int 43390 43599 43605 43329 43330 43604 43601 43601 43332 43330 ...
## $ STORE_NBR : int 1 1 1 2 2 4 4 4 5 7 ...
## $ LYLTY_CARD_NBR: int 1000 1307 1343 2373 2426 4074 4149 4196 5026 7150 ...
## $ TXN_ID : int 1 348 383 974 1038 2982 3333 3539 4525 6900 ...
## $ PROD_NBR : int 5 66 61 69 108 57 16 24 42 52 ...
## $ PROD_NAME : chr "Natural Chip Compny SeaSalt175g" "CCs Nacho Cheese 175g"
"Smiths Crinkle Cut Chips Chicken 170g" "Smiths Chip Thinly S/Cream&Onion 175g"
...
## $ PROD_QTY : int 2 3 2 5 3 1 1 1 1 2 ...
## $ TOT_SALES : num 6 6.3 2.9 15 13.8 5.1 5.7 3.6 3.9 7.2 ...
## - attr(*, ".internal.selfref")=<externalptr>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{transactionData}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##          DATE STORE_NBR LYLTY_CARD_NBR TXN_ID PROD_NBR
##      1: 43390         1           1000      1        5
##      2: 43599         1           1307    348       66
##      3: 43605         1           1343    383       61
##      4: 43329         2           2373    974       69
##      5: 43330         2           2426   1038      108
##     ---                                               
## 264832: 43533       272         272319 270088       89
## 264833: 43325       272         272358 270154       74
## 264834: 43410       272         272379 270187       51
## 264835: 43461       272         272379 270188       42
## 264836: 43365       272         272380 270189       74
##                                        PROD_NAME PROD_QTY TOT_SALES
##      1:   Natural Chip        Compny SeaSalt175g        2       6.0
##      2:                 CCs Nacho Cheese    175g        3       6.3
##      3:   Smiths Crinkle Cut  Chips Chicken 170g        2       2.9
##      4:   Smiths Chip Thinly  S/Cream&Onion 175g        5      15.0
##      5: Kettle Tortilla ChpsHny&Jlpno Chili 150g        3      13.8
##     ---                                                            
## 264832:  Kettle Sweet Chilli And Sour Cream 175g        2      10.8
## 264833:            Tostitos Splash Of  Lime 175g        1       4.4
## 264834:                 Doritos Mexicana    170g        2       8.8
## 264835:  Doritos Corn Chip Mexican Jalapeno 150g        2       7.8
## 264836:            Tostitos Splash Of  Lime 175g        2       8.8
\end{verbatim}

We can see that the date column is in an integer format. Let's change
this to a date format.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\# Convert DATE column to a date format}
\DocumentationTok{\#\#\#\# A quick search online tells us that CSV and Excel integer dates begin on 30 Dec 1899}

\NormalTok{transactionData}\SpecialCharTok{$}\NormalTok{DATE }\OtherTok{\textless{}{-}} \FunctionTok{as.Date}\NormalTok{(transactionData}\SpecialCharTok{$}\NormalTok{DATE, }\AttributeTok{origin =} \StringTok{"1899{-}12{-}30"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

We should check that we are looking at the right products by examining
PROD\_NAME.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\# Examine PROD\_NAME}
\CommentTok{\# Over to you! Generate a summary of the PROD\_NAME column.}

\NormalTok{transactionData}\SpecialCharTok{$}\NormalTok{PROD\_NAME[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{10}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Natural Chip        Compny SeaSalt175g"  
##  [2] "CCs Nacho Cheese    175g"                
##  [3] "Smiths Crinkle Cut  Chips Chicken 170g"  
##  [4] "Smiths Chip Thinly  S/Cream&Onion 175g"  
##  [5] "Kettle Tortilla ChpsHny&Jlpno Chili 150g"
##  [6] "Old El Paso Salsa   Dip Tomato Mild 300g"
##  [7] "Smiths Crinkle Chips Salt & Vinegar 330g"
##  [8] "Grain Waves         Sweet Chilli 210g"   
##  [9] "Doritos Corn Chip Mexican Jalapeno 150g" 
## [10] "Grain Waves Sour    Cream&Chives 210G"
\end{verbatim}

Looks like we are definitely looking at potato chips but how can we
check that these are all chips? We can do some basic text analysis by
summarizing the individual words in the product name.

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\# Examine the words in PROD\_NAME to see if there are any incorrect entries}
\DocumentationTok{\#\#\#\# such as products that are not chips}

\CommentTok{\# make dataframe of all chars in all data names}
\NormalTok{productWords }\OtherTok{\textless{}{-}} \FunctionTok{data.table}\NormalTok{(}\FunctionTok{unlist}\NormalTok{(}\FunctionTok{strsplit}\NormalTok{(}\FunctionTok{unique}\NormalTok{(transactionData[, PROD\_NAME]), }\StringTok{""}\NormalTok{)))}

\CommentTok{\# set column name as words}
\FunctionTok{setnames}\NormalTok{(productWords, }\StringTok{\textquotesingle{}words\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

As we are only interested in words that will tell us if the product is
chips or not, let's remove all words with digits and special characters
such as `\&' from our set of product words. We can do this using
\texttt{grepl()}.

\end{document}
